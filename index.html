<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIONS KARATE CLUB PUNE - Official Results Portal</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;500;600;700;800&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
     
    <style>
        :root {
            --primary-color: #e63946;
            --primary-dark: #c1121f;
            --primary-light: #f8ad9d;
            --secondary-color: #2a9d8f;
            --accent-color: #e9c46a;
            --gold-color: #FFD700;
            --gold-dark: #D4AF37;
            --dark-color: #264653;
            --light-color: #f8f9fa;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark-color);
            overflow-x: hidden;
        }
        
        /* Animated Background Particles */
        .particles-container {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: linear-gradient(45deg, var(--primary-color), var(--gold-color));
            border-radius: 50%;
            animation: floatParticle 20s infinite linear;
        }
        
        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Loading Overlay */
        #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--dark-color), var(--primary-color));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease;
        }
        
        .loading-container {
            text-align: center;
        }
        
        .loading-lion {
            font-size: 5rem;
            color: var(--gold-color);
            animation: lionRoar 2s infinite alternate;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        }
        
        @keyframes lionRoar {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 1.5rem;
            margin-top: 20px;
            position: relative;
        }
        
        .loading-text::after {
            content: '...';
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        /* Header */
        .main-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
            animation: slideDown 0.5s ease;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 2rem;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .logo:hover {
            transform: scale(1.05);
            color: var(--primary-dark);
        }
        
        .logo-img {
            height: 60px;
            width: auto;
            animation: lionFloat 3s ease-in-out infinite;
            border-radius: 10px;
        }
        
        @keyframes lionFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(rgba(38, 70, 83, 0.95), rgba(38, 70, 83, 0.95)), url('https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 120px 0;
            border-radius: 0 0 40px 40px;
            margin-bottom: 50px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                rgba(230, 57, 70, 0.3), 
                rgba(233, 196, 106, 0.3), 
                rgba(42, 157, 143, 0.3));
            animation: heroGradient 8s ease infinite;
            background-size: 300% 300%;
        }
        
        @keyframes heroGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .hero-title {
            font-size: 3.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--gold-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            from {
                text-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            }
            to {
                text-shadow: 0 5px 35px rgba(255, 215, 0, 0.5);
            }
        }
        
        .hero-subtitle {
            font-size: 1.4rem;
            font-weight: 300;
            margin-bottom: 30px;
            opacity: 0.9;
            max-width: 700px;
        }
        
        /* Floating Certificates */
        .floating-cert {
            position: absolute;
            font-size: 4rem;
            color: rgba(255, 215, 0, 0.3);
            animation: float 6s ease-in-out infinite;
        }
        
        .cert-1 {
            top: 20%;
            right: 10%;
            animation-delay: 0s;
        }
        
        .cert-2 {
            top: 40%;
            left: 10%;
            animation-delay: 2s;
        }
        
        .cert-3 {
            bottom: 20%;
            right: 20%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1); 
            }
            50% { 
                transform: translateY(-20px) rotate(10deg) scale(1.1); 
            }
        }
        
        /* Search Section */
        .search-section {
            margin-top: -50px;
            position: relative;
            z-index: 100;
        }
        
        .search-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.25);
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            animation: cardAppear 0.8s ease-out;
        }
        
        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .search-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 35px 80px rgba(0, 0, 0, 0.35);
            border-color: var(--primary-color);
        }
        
        .search-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--gold-color), var(--secondary-color));
            animation: borderFlow 3s linear infinite;
        }
        
        @keyframes borderFlow {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 0%; }
        }
        
        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--dark-color);
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--gold-color));
            border-radius: 2px;
            animation: widthGrow 2s ease infinite alternate;
        }
        
        @keyframes widthGrow {
            0% { width: 80px; }
            100% { width: 120px; }
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        .form-label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-control {
            height: 60px;
            border-radius: 15px;
            border: 2px solid #e1e5e9;
            padding: 15px 25px 15px 50px;
            font-size: 1.1rem;
            transition: var(--transition);
            background: rgba(248, 249, 250, 0.8);
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(230, 57, 70, 0.2);
            transform: translateY(-3px);
            background: white;
        }
        
        .form-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
            font-size: 1.2rem;
            z-index: 1;
        }
        
        /* Mobile Input - FIXED */
        #parentMobile {
            letter-spacing: 1px;
        }
        
        .search-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            height: 65px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1.2rem;
            padding: 15px 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            width: 100%;
            transition: var(--transition);
            box-shadow: 0 15px 40px rgba(230, 57, 70, 0.3);
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .search-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }
        
        .search-btn:hover::after {
            left: 100%;
        }
        
        .search-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 25px 50px rgba(230, 57, 70, 0.4);
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
        }
        
        /* Result Section */
        .result-section {
            padding: 80px 0;
            display: none;
        }
        
        .result-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .result-card {
            background: white;
            border-radius: 30px;
            padding: 60px;
            box-shadow: 0 35px 100px rgba(0, 0, 0, 0.25);
            margin-bottom: 40px;
            border: 4px solid var(--primary-color);
            position: relative;
            overflow: hidden;
            animation: resultAppear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes resultAppear {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.8) rotateX(-10deg);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1) rotateX(0);
            }
        }
        
        .result-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(to right, var(--primary-color), var(--gold-color), var(--secondary-color));
        }
        
        .student-header {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 3px dashed #e1e5e9;
            position: relative;
        }
        
        .student-avatar {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--gold-color));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 4rem;
            color: white;
            box-shadow: 0 20px 50px rgba(230, 57, 70, 0.4);
            border: 8px solid white;
            position: relative;
            animation: avatarFloat 4s ease-in-out infinite;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .student-avatar:hover {
            transform: scale(1.1) rotate(360deg);
            background: linear-gradient(135deg, var(--gold-color), var(--primary-color));
        }
        
        @keyframes avatarFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
                box-shadow: 0 20px 50px rgba(230, 57, 70, 0.4);
            }
            50% { 
                transform: translateY(-20px) rotate(10deg); 
                box-shadow: 0 30px 70px rgba(230, 57, 70, 0.6);
            }
        }
        
        .student-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            animation: nameGlow 3s ease-in-out infinite;
        }
        
        @keyframes nameGlow {
            0%, 100% { text-shadow: 0 5px 15px rgba(0,0,0,0.1); }
            50% { text-shadow: 0 5px 25px rgba(230, 57, 70, 0.3); }
        }
        
        .student-name::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--gold-color));
            border-radius: 2px;
        }
        
        /* GOLD Result Badge */
        .result-badge {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            padding: 25px 50px;
            border-radius: 60px;
            font-weight: 800;
            font-size: 2rem;
            margin: 40px auto;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.2),
                0 0 30px rgba(255, 215, 0, 0.3);
            animation: badgePulse 2s infinite, badgeGlow 3s infinite alternate;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            background: linear-gradient(135deg, var(--gold-color), var(--gold-dark));
            color: #8B4513;
            border: 3px solid #D4AF37;
        }
        
        @keyframes badgePulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 
                    0 20px 50px rgba(0, 0, 0, 0.2),
                    0 0 30px rgba(255, 215, 0, 0.3);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 
                    0 25px 60px rgba(0, 0, 0, 0.3),
                    0 0 40px rgba(255, 215, 0, 0.5);
            }
        }
        
        @keyframes badgeGlow {
            from { 
                filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
            }
            to { 
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
            }
        }
        
        .result-badge:hover {
            transform: scale(1.1) rotate(5deg);
            animation-play-state: paused;
        }
        
        .result-badge i {
            animation: trophySpin 4s linear infinite;
        }
        
        @keyframes trophySpin {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }
        
        /* Info Grid */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }
        
        .info-item {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: 25px;
            border-left: 8px solid var(--primary-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            animation: itemAppear 0.6s ease-out;
            animation-fill-mode: both;
        }
        
        @keyframes itemAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .info-item:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            background: linear-gradient(135deg, white, #e9ecef);
        }
        
        .info-label {
            font-size: 1rem;
            color: #6c757d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--dark-color);
            min-height: 40px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* Belt Badges */
        .belt-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.2rem;
            margin: 5px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: var(--transition);
            cursor: pointer;
            animation: beltFloat 3s ease-in-out infinite;
        }
        
        @keyframes beltFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .belt-badge:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }
        
        .belt-white { background: linear-gradient(135deg, #f8f9fa, #e9ecef); color: #212529; border: 2px solid #dee2e6; }
        .belt-yellow { background: linear-gradient(135deg, #ffd700, #ffc107); color: #212529; }
        .belt-orange { background: linear-gradient(135deg, #ff8c00, #fd7e14); color: white; }
        .belt-green { background: linear-gradient(135deg, #28a745, #1e7e34); color: white; }
        .belt-blue { background: linear-gradient(135deg, #17a2b8, #138496); color: white; }
        .belt-purple { background: linear-gradient(135deg, #6f42c1, #5a32a3); color: white; }
        .belt-red { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
        .belt-brown { background: linear-gradient(135deg, #8B4513, #5d2d0c); color: white; }
        .belt-black { background: linear-gradient(135deg, #212529, #000000); color: white; }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 60px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 20px 40px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.3rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            text-decoration: none;
            transition: var(--transition);
            min-width: 250px;
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            animation: buttonPulse 2s infinite;
        }
        
        @keyframes buttonPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .action-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .action-btn:hover::after {
            width: 300px;
            height: 300px;
        }
        
        .btn-download {
            background: linear-gradient(135deg, var(--secondary-color), #1a7c6e);
            color: white;
            box-shadow: 0 15px 35px rgba(42, 157, 143, 0.3);
        }
        
        .btn-download:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 25px 50px rgba(42, 157, 143, 0.4);
            color: white;
            animation: none;
        }
        
        .btn-print {
            background: linear-gradient(135deg, var(--dark-color), #1d3557);
            color: white;
            box-shadow: 0 15px 35px rgba(38, 70, 83, 0.3);
        }
        
        .btn-print:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 25px 50px rgba(38, 70, 83, 0.4);
            color: white;
            animation: none;
        }
        
        .btn-new-search {
            background: linear-gradient(135deg, var(--gold-color), #d4ac0d);
            color: var(--dark-color);
            box-shadow: 0 15px 35px rgba(255, 215, 0, 0.3);
        }
        
        .btn-new-search:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 25px 50px rgba(255, 215, 0, 0.4);
            color: var(--dark-color);
            animation: none;
        }
        
        /* No Result */
        .no-result {
            text-align: center;
            padding: 80px 40px;
            background: white;
            border-radius: 30px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
            border: 3px solid var(--primary-color);
            animation: shake 0.5s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .no-result-icon {
            font-size: 8rem;
            color: #e1e5e9;
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            75% { transform: translateY(10px) rotate(-5deg); }
        }
        
        /* Footer */
        .main-footer {
            background: linear-gradient(135deg, var(--dark-color), #1d3557);
            color: white;
            padding: 100px 0 50px;
            margin-top: 100px;
            position: relative;
        }
        
        .main-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--gold-color), var(--secondary-color));
        }
        
        .footer-logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 2.5rem;
            color: white;
            text-decoration: none;
            margin-bottom: 25px;
            display: inline-block;
            transition: var(--transition);
        }
        
        .footer-logo:hover {
            transform: translateY(-5px);
            color: var(--gold-color);
        }
        
        .footer-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .social-link {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 1.4rem;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .social-link:hover {
            background: var(--primary-color);
            transform: translateY(-5px) rotate(10deg);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .custom-toast {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
            border-left: 6px solid var(--primary-color);
            margin-bottom: 20px;
            transform: translateX(400px);
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 400px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: toastShake 0.5s ease;
        }
        
        @keyframes toastShake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(10px) rotate(2deg); }
            75% { transform: translateX(-10px) rotate(-2deg); }
        }
        
        .custom-toast.show {
            transform: translateX(0);
        }
        
        .toast-icon {
            font-size: 2.5rem;
        }
        
        /* Scroll to Top Button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: var(--transition);
            box-shadow: 0 10px 30px rgba(230, 57, 70, 0.3);
            animation: scrollTopBounce 2s infinite;
        }
        
        @keyframes scrollTopBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .scroll-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-top:hover {
            transform: translateY(-10px) scale(1.1);
            box-shadow: 0 15px 40px rgba(230, 57, 70, 0.4);
            animation: none;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1200px) {
            .hero-title {
                font-size: 3rem;
            }
            
            .student-name {
                font-size: 2.8rem;
            }
        }
        
        @media (max-width: 992px) {
            .hero-section {
                padding: 80px 0;
            }
            
            .search-card {
                padding: 40px 30px;
            }
            
            .result-card {
                padding: 40px 30px;
            }
            
            .action-btn {
                min-width: 200px;
                padding: 18px 30px;
            }
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-section {
                padding: 60px 0;
                border-radius: 0 0 40px 40px;
            }
            
            .search-card {
                padding: 30px 20px;
                margin: 0 15px;
            }
            
            .student-name {
                font-size: 2.2rem;
            }
            
            .student-avatar {
                width: 140px;
                height: 140px;
                font-size: 3.5rem;
            }
            
            .result-card {
                padding: 30px 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-btn {
                width: 100%;
                min-width: auto;
            }
            
            .form-control, .search-btn {
                height: 55px;
            }
            
            .main-footer {
                padding: 60px 0 30px;
            }
        }
        
        @media (max-width: 576px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .student-name {
                font-size: 1.8rem;
            }
            
            .result-badge {
                font-size: 1.5rem;
                padding: 20px 30px;
            }
            
            .info-value {
                font-size: 1.3rem;
            }
            
            .action-btn {
                padding: 15px 20px;
                font-size: 1.1rem;
            }
        }
        
        /* UPDATED: FIXED Print Styles - Single Page Only with Logo */
        @media print {
            @page {
                margin: 5mm !important;
                size: A4 portrait !important;
            }
            
            body, html {
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
                height: auto !important;
                background: white !important;
                font-size: 10pt !important;
                font-family: 'Times New Roman', serif !important;
                color: black !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            .no-print,
            .main-header,
            .search-section,
            .hero-section,
            .main-footer,
            .action-buttons,
            .btn-new-search,
            .toast-container,
            .scroll-top,
            .particles-container,
            .floating-cert,
            .search-btn,
            .form-control,
            #searchForm,
            .info-item:hover,
            .info-item:before,
            .result-card:before {
                display: none !important;
            }
            
            .result-section {
                display: block !important;
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                height: auto !important;
                page-break-inside: avoid !important;
                page-break-before: avoid !important;
                page-break-after: avoid !important;
            }
            
            .result-container {
                max-width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .result-card {
                width: 100% !important;
                min-height: auto !important;
                max-height: none !important;
                margin: 0 !important;
                padding: 10mm !important;
                box-shadow: none !important;
                border: 2px solid #000 !important;
                border-radius: 3mm !important;
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                overflow: visible !important;
                position: relative;
                background: white !important;
            }
            
            /* Compact layout for single page */
            .student-header {
                margin-bottom: 5mm !important;
                padding-bottom: 2mm !important;
                border-bottom: 1px solid #000 !important;
                text-align: center;
            }
            
            .student-avatar {
                width: 30mm !important;
                height: 30mm !important;
                font-size: 16pt !important;
                margin-bottom: 2mm !important;
                animation: none !important;
                border: 2px solid #000 !important;
                box-shadow: none !important;
                background: #f0f0f0 !important;
            }
            
            .student-name {
                font-size: 16pt !important;
                margin-bottom: 2mm !important;
                color: black !important;
                text-shadow: none !important;
                font-weight: bold !important;
            }
            
            .result-badge {
                font-size: 12pt !important;
                padding: 2mm 4mm !important;
                margin: 2mm auto !important;
                animation: none !important;
                box-shadow: none !important;
                border: 1px solid #000 !important;
                color: black !important;
                background: #f0f0f0 !important;
                font-weight: bold !important;
            }
            
            .info-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 2mm !important;
                margin: 3mm 0 !important;
            }
            
            .info-item {
                padding: 2mm !important;
                margin: 0 !important;
                border-left-width: 1mm !important;
                box-shadow: none !important;
                transform: none !important;
                animation: none !important;
                background: #f8f8f8 !important;
                border: 1px solid #ddd !important;
                page-break-inside: avoid !important;
            }
            
            .info-label {
                font-size: 7pt !important;
                margin-bottom: 0.5mm !important;
                color: #666 !important;
                font-weight: bold !important;
            }
            
            .info-value {
                font-size: 9pt !important;
                line-height: 1.2 !important;
                color: black !important;
                min-height: auto !important;
                font-weight: normal !important;
            }
            
            .belt-badge {
                padding: 0.5mm 1mm !important;
                font-size: 7pt !important;
                animation: none !important;
                box-shadow: none !important;
                border: 0.5px solid #000 !important;
                background: #f0f0f0 !important;
            }
            
            /* Hide all animations and transitions */
            * {
                animation: none !important;
                transition: none !important;
            }
            
            /* Ensure everything fits on one page */
            .result-card {
                page-break-after: avoid !important;
                page-break-before: avoid !important;
                break-inside: avoid !important;
                height: auto !important;
                min-height: 0 !important;
            }
            
            /* Add print logo */
            .print-logo {
                display: block !important;
                text-align: center !important;
                margin-bottom: 3mm !important;
            }
            
            .print-logo img {
                max-width: 40mm !important;
                height: auto !important;
                filter: grayscale(100%) !important;
            }
            
            /* Hide decorative elements */
            .student-avatar i,
            .result-badge i {
                display: none !important;
            }
        }
        
        /* Celebration Confetti */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background: var(--gold-color);
            top: -10px;
            z-index: 9998;
        }
    </style>
</head>
<body>
    <!-- Animated Background Particles -->
    <div class="particles-container" id="particlesContainer"></div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay">
        <div class="loading-container">
            <i class="fas fa-lion loading-lion"></i>
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Secure Portal</div>
        </div>
    </div>
    
    <!-- Scroll to Top Button -->
    <div class="scroll-top" onclick="scrollToTop()">
        <i class="fas fa-chevron-up"></i>
    </div>
    
    <!-- Floating Certificates -->
    <div class="floating-cert cert-1">
        <i class="fas fa-award"></i>
    </div>
    <div class="floating-cert cert-2">
        <i class="fas fa-trophy"></i>
    </div>
    <div class="floating-cert cert-3">
        <i class="fas fa-medal"></i>
    </div>
    
    <!-- Header -->
    <header class="main-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <a href="#" class="logo" onclick="resetSearch(); return false;">
                    <img src="https://i.postimg.cc/nzD5T1Q4/lion-Club-logo.png" alt="Lions Karate Club Logo" class="logo-img">
                    <span>Lions Karate Club Pune</span>
                </a>
                <div class="d-none d-md-block">
                    <span class="badge bg-primary px-4 py-3 fs-5 animate__animated animate__pulse animate__infinite">
                        <i class="fas fa-shield-alt me-2"></i>Results 2026
                    </span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="hero-title animate__animated animate__fadeInUp">
                        Belt Examination Results
                    </h1>
                    <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                        Proudly presenting the examination results of our talented students. 
                        Check your child's achievement instantly with our secure portal.
                    </p>
                    <div class="mt-4 animate__animated animate__fadeInUp animate__delay-2s">
                        <div class="d-flex flex-wrap gap-3">
                            <span class="badge bg-warning text-dark px-4 py-3 fs-6 animate__animated animate__bounceIn animate__delay-3s">
                                <i class="fas fa-bolt me-2"></i>Live Updates
                            </span>
                            <span class="badge bg-success px-4 py-3 fs-6 animate__animated animate__bounceIn animate__delay-4s">
                                <i class="fas fa-lock me-2"></i>100% Secure
                            </span>
                            <span class="badge bg-info px-4 py-3 fs-6 animate__animated animate__bounceIn animate__delay-5s">
                                <i class="fas fa-file-pdf me-2"></i>Gold Certificate
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 d-none d-lg-block">
                    <div class="text-center">
                        <i class="fas fa-certificate" style="font-size: 15rem; color: rgba(255,215,0,0.1); animation: float 6s ease-in-out infinite;"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Search Section -->
    <section class="search-section" id="searchSection">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-9 col-xl-8">
                    <div class="search-card" data-aos="fade-up" data-aos-duration="1000">
                        <h2 class="section-title text-center">
                            <i class="fas fa-search me-3"></i>Find Your Child's Result
                        </h2>
                        <p class="text-center text-muted mb-5 fs-5">
                            Enter your child's details to view their examination results instantly
                        </p>
                        
                        <form id="searchForm" novalidate>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-user-graduate text-primary"></i> Student Full Name
                                        </label>
                                        <div class="position-relative">
                                            <i class="fas fa-user form-icon"></i>
                                            <input type="text" 
                                                   class="form-control" 
                                                   id="studentName" 
                                                   placeholder="Enter student's full name"
                                                   required
                                                   autocomplete="off">
                                        </div>
                                        <small class="text-muted mt-2 d-block">
                                            <i class="fas fa-info-circle me-1"></i> Enter name as per registration
                                        </small>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-phone text-primary"></i> Parent Mobile Number
                                        </label>
                                        <div class="position-relative">
                                            <i class="fas fa-phone form-icon"></i>
                                            <input type="tel" 
                                                   class="form-control" 
                                                   id="parentMobile" 
                                                   placeholder="e.g., 9876543210 or 987-654-3210"
                                                   required
                                                   autocomplete="off"
                                                   oninput="formatPhoneNumber(this)">
                                        </div>
                                        <small class="text-muted mt-2 d-block">
                                            <i class="fas fa-info-circle me-1"></i> 10-digit mobile number (with or without dashes)
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="search-btn mt-5" id="searchButton">
                                <i class="fas fa-search"></i> Search Results
                            </button>
                        </form>
                        
                        <div class="text-center mt-5 pt-4 border-top">
                            <p class="text-muted mb-0">
                                <i class="fas fa-shield-alt me-2 text-primary"></i>
                                Your information is secure and confidential
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Results Section -->
    <section class="result-section" id="resultSection">
        <div class="container">
            <div class="result-container">
                <!-- Results will be displayed here -->
            </div>
            
            <div id="noResult" class="no-result" style="display: none;" data-aos="zoom-in">
                <div class="no-result-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h2 class="mb-4">No Results Found</h2>
                <p class="text-muted mb-4 fs-5">
                    We couldn't find any results matching your search. Please check the details and try again.
                </p>
                <button class="btn btn-primary btn-lg px-5 py-3" onclick="resetSearch()">
                    <i class="fas fa-redo me-2"></i>Try Again
                </button>
            </div>
        </div>
    </section>
    
    <!-- Instructions -->
    <section class="py-5 bg-white">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10 text-center">
                    <h2 class="section-title mb-5">How to Check Results</h2>
                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="p-4" data-aos="fade-up" data-aos-delay="100">
                                <div class="rounded-circle bg-primary d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                                    <i class="fas fa-search text-white fa-3x"></i>
                                </div>
                                <h4 class="mb-3">1. Enter Details</h4>
                                <p class="text-muted">Provide your child's name and registered mobile number</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-4" data-aos="fade-up" data-aos-delay="200">
                                <div class="rounded-circle bg-success d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                                    <i class="fas fa-chart-line text-white fa-3x"></i>
                                </div>
                                <h4 class="mb-3">2. View Results</h4>
                                <p class="text-muted">See detailed examination results with gold certificate</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-4" data-aos="fade-up" data-aos-delay="300">
                                <div class="rounded-circle bg-warning d-inline-flex align-items-center justify-content-center mb-4" style="width: 100px; height: 100px;">
                                    <i class="fas fa-certificate text-white fa-3x"></i>
                                </div>
                                <h4 class="mb-3">3. Download & Print</h4>
                                <p class="text-muted">Download professional gold certificate or print</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-4">
                    <a href="#" class="footer-logo" onclick="resetSearch(); return false;">
                        <i class="fas fa-lion me-2"></i>Lions Karate Club
                    </a>
                    <p class="footer-text mt-3">
                        Excellence in martial arts training since 2023. 
                        Building champions with discipline, respect, and dedication.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                <div class="col-lg-4">
                    <h4 class="text-white mb-4 fs-3">Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="#" onclick="resetSearch(); return false;"><i class="fas fa-home me-2"></i>Home</a></li>
                        <li><a href="#" onclick="scrollToSearch(); return false;"><i class="fas fa-search me-2"></i>Check Results</a></li>
                        <li><a href="#"><i class="fas fa-info-circle me-2"></i>About Club</a></li>
                        <li><a href="#"><i class="fas fa-graduation-cap me-2"></i>Training Programs</a></li>
                        <li><a href="#"><i class="fas fa-phone me-2"></i>Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h4 class="text-white mb-4 fs-3">Contact Info</h4>
                    <ul class="footer-links">
                        <li class="mb-3">
                            <i class="fas fa-map-marker-alt me-3 text-primary"></i>
                            Lions Karate Club, Pune, Maharashtra
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-phone me-3 text-primary"></i>
                            +91 90496 88172 
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-envelope me-3 text-primary"></i>
                            results@lionskarateclubpune.com
                        </li>
                        <li>
                            <i class="fas fa-clock me-3 text-primary"></i>
                            Mon-Sat: 8:00 AM - 8:00 PM
                        </li>
                    </ul>
                </div>
            </div>
            <hr class="my-5" style="border-color: rgba(255, 255, 255, 0.1);">
            <div class="text-center">
                <p class="mb-0 text-white-50 fs-5">
                     2026 Lions Karate Club Pune. All rights reserved.
                </p>
                <p class="text-white-50 mt-2">
                    <i class="fas fa-history me-2"></i>Established in 2023
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Toast Container -->
    <div class="toast-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- jsPDF for PDF generation - UPDATED FIXED VERSION -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.js"></script>
    
    <!-- html2canvas for capturing HTML as image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100
        });
        
        // Google Sheets Configuration
        const GOOGLE_SHEETS_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT7M9U6cGyuZtA1YhdQVt3OwzqWlfYHSINdS0mgSFFC09TaBBMs0gPKU_GKVOMc3zmltSCqrTQIcTZh/pub?gid=11667653&single=true&output=csv';
        
        let allStudents = [];
        let currentStudent = null;
        const CLUB_LOGO_URL = 'https://i.postimg.cc/nzD5T1Q4/lion-Club-logo.png';
        let isGeneratingPDF = false;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Create animated particles
            createParticles();
            
            // Initialize scroll events
            initScrollEvents();
            
            // Hide loading screen after initial load
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingOverlay').style.display = 'none';
                    
                    // Load data from Google Sheets
                    loadDataFromGoogleSheets();
                }, 500);
            }, 2000);
            
            // Setup event listeners
            setupEventListeners();
            
            // Preload logo for PDF
            preloadLogo();
        });
        
        function preloadLogo() {
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.src = CLUB_LOGO_URL;
        }
        
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random properties
                const size = Math.random() * 10 + 5;
                const posX = Math.random() * 100;
                const delay = Math.random() * 20;
                const duration = Math.random() * 10 + 15;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                // Random gradient
                const colors = ['#e63946', '#2a9d8f', '#e9c46a', '#FFD700'];
                const color1 = colors[Math.floor(Math.random() * colors.length)];
                const color2 = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = `linear-gradient(45deg, ${color1}, ${color2})`;
                
                container.appendChild(particle);
            }
        }
        
        function initScrollEvents() {
            // Header scroll effect
            window.addEventListener('scroll', function() {
                const scrollTop = document.querySelector('.scroll-top');
                
                // Show/hide scroll to top button
                if (window.scrollY > 300) {
                    scrollTop.classList.add('show');
                } else {
                    scrollTop.classList.remove('show');
                }
            });
        }
        
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // FIXED: Mobile number formatting that works with both typing and copy-paste
        function formatPhoneNumber(input) {
            // Get the current value
            let value = input.value;
            
            // Remove all non-digits
            let digits = value.replace(/\D/g, '');
            
            // Limit to 10 digits for Indian mobile numbers
            if (digits.length > 10) {
                digits = digits.substring(0, 10);
            }
            
            // Format with dashes if user is typing
            let formattedValue = digits;
            if (digits.length > 6) {
                formattedValue = digits.replace(/(\d{3})(\d{3})(\d{4})/, '$1-$2-$3');
            } else if (digits.length > 3) {
                formattedValue = digits.replace(/(\d{3})(\d{1,3})/, '$1-$2');
            }
            
            // Only update if different (prevents cursor jumping)
            if (value !== formattedValue) {
                input.value = formattedValue;
            }
        }
        
        function setupEventListeners() {
            // Search form submission
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                searchStudent();
            });
            
            // Mobile number formatting
            document.getElementById('parentMobile').addEventListener('input', function() {
                formatPhoneNumber(this);
            });
            
            // Allow paste in mobile field
            document.getElementById('parentMobile').addEventListener('paste', function(e) {
                // Let the paste happen first
                setTimeout(() => {
                    formatPhoneNumber(this);
                }, 0);
            });
        }
        
        async function loadDataFromGoogleSheets() {
            try {
                showToast(' Connecting to secure database...', 'info');
                
                const response = await fetch(GOOGLE_SHEETS_CSV_URL);
                const csvText = await response.text();
                
                if (csvText && !csvText.includes('<!DOCTYPE html>')) {
                    parseCSVData(csvText);
                    showToast(` Database loaded with ${allStudents.length} records`, 'success');
                } else {
                    throw new Error('CSV export failed');
                }
                
            } catch (error) {
                console.log(' Using sample data:', error.message);
                loadSampleData();
                showToast(' Using offline database', 'warning');
            }
        }
        
        function parseCSVData(csvText) {
            const rows = csvText.split('\n').filter(row => row.trim() !== '');
            allStudents = [];
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i].split(',');
                
                if (row.length >= 10) {
                    const student = {
                        name: cleanText(row[2] || ''),
                        dob: cleanText(row[3] || ''),
                        gender: cleanText(row[4] || ''),
                        parentName: cleanText(row[5] || ''),
                        parentMobile: cleanMobile(cleanText(row[6] || '')),
                        branch: cleanText(row[7] || ''),
                        currentBelt: cleanText(row[8] || ''),
                        appearingBelt: cleanText(row[9] || ''),
                        feesStatus: cleanText(row[10] || ''),
                        result: cleanText(row[13] || 'PASS'),
                        grade: 'A+'
                    };
                    
                    if (student.name && student.parentMobile) {
                        allStudents.push(student);
                    }
                }
            }
            
            console.log(` Total students loaded: ${allStudents.length}`);
        }
        
        function cleanText(text) {
            return text.replace(/^"|"$/g, '').replace(/"/g, '').trim();
        }
        
        // FIXED: Clean mobile number properly
        function cleanMobile(mobile) {
            // Remove all non-digits and ensure it's a string
            return mobile.toString().replace(/\D/g, '');
        }
        
        function loadSampleData() {
            // Sample data with more students
            allStudents = [
                {
                    name: "Shivansh Chaudhary",
                    dob: "2022-07-22",
                    gender: "Male",
                    parentName: "Adarsh Choudhary",
                    parentMobile: "7066210808",
                    branch: "Manaji Nagar Branch",
                    currentBelt: "White Belt",
                    appearingBelt: "Yellow Belt",
                    feesStatus: "Fees Paid",
                    result: "PASS",
                    grade: "A+"
                },
                {
                    name: "Shlok Dhananjay Rajhans",
                    dob: "2021-01-15",
                    gender: "Male",
                    parentName: "Dhananjay Vasudev Rajhans",
                    parentMobile: "7385061424",
                    branch: "Bright Mind Branch",
                    currentBelt: "White Belt",
                    appearingBelt: "Yellow Belt",
                    feesStatus: "Fees Paid",
                    result: "PASS",
                    grade: "A+"
                },
                {
                    name: "Vaishnavi Shivaji Tupe",
                    dob: "2014-10-28",
                    gender: "Female",
                    parentName: "Sadhana Shivaji Tupe",
                    parentMobile: "9850574541",
                    branch: "Bhumkar Nagar Branch",
                    currentBelt: "Green Belt",
                    appearingBelt: "Blue Belt",
                    feesStatus: "Fees Paid",
                    result: "PASS",
                    grade: "A+"
                },
                {
                    name: "Mansvi Vinod Kadam",
                    dob: "2019-01-05",
                    gender: "Female",
                    parentName: "Vinod Tanaji Kadam",
                    parentMobile: "9168184243",
                    branch: "Bhumkar Nagar Branch",
                    currentBelt: "White Belt",
                    appearingBelt: "Yellow Belt",
                    feesStatus: "Fees Paid",
                    result: "PASS",
                    grade: "A+"
                },
                {
                    name: "Arushi Sharma",
                    dob: "2019-12-06",
                    gender: "Female",
                    parentName: "Megha Sharma",
                    parentMobile: "7610412682",
                    branch: "Bright Mind Branch",
                    currentBelt: "Orange Belt",
                    appearingBelt: "Green Belt",
                    feesStatus: "Fees Paid",
                    result: "PASS",
                    grade: "A+"
                }
            ];
        }
        
        // FIXED: Search function that works with both manual typing and copy-paste
        function searchStudent() {
            const studentName = document.getElementById('studentName').value.trim().toLowerCase();
            const parentMobileInput = document.getElementById('parentMobile').value;
            
            // FIXED: Clean mobile number properly for comparison
            const parentMobile = cleanMobile(parentMobileInput);
            
            if (!studentName) {
                showToast('Please enter student name', 'warning');
                document.getElementById('studentName').focus();
                return;
            }
            
            if (!parentMobile || parentMobile.length !== 10) {
                showToast('Please enter a valid 10-digit mobile number', 'warning');
                document.getElementById('parentMobile').focus();
                return;
            }

            showLoading(true);
            
            setTimeout(() => {
                // FIXED: Better search logic
                const results = allStudents.filter(student => {
                    // Clean the stored mobile number
                    const storedMobile = cleanMobile(student.parentMobile);
                    
                    // Check if name matches (partial match)
                    const nameMatch = student.name.toLowerCase().includes(studentName) || 
                                     studentName.includes(student.name.toLowerCase());
                    
                    // Check if mobile matches (exact match after cleaning)
                    const mobileMatch = storedMobile === parentMobile;
                    
                    return nameMatch && mobileMatch;
                });
                
                if (results.length > 0) {
                    let bestMatch = results[0];
                    
                    // Try to find exact name match
                    for (const student of results) {
                        if (student.name.toLowerCase() === studentName.toLowerCase()) {
                            bestMatch = student;
                            break;
                        }
                    }
                    
                    currentStudent = bestMatch;
                    displayResult(bestMatch);
                    createCelebration();
                    showToast(' Result found! Congratulations!', 'success');
                } else {
                    // Try fuzzy search
                    const fuzzyResults = allStudents.filter(student => {
                        const storedMobile = cleanMobile(student.parentMobile);
                        const nameSimilar = student.name.toLowerCase().includes(studentName) || 
                                          studentName.includes(student.name.toLowerCase());
                        const mobileSimilar = storedMobile.includes(parentMobile) || 
                                            parentMobile.includes(storedMobile);
                        return nameSimilar && mobileSimilar;
                    });
                    
                    if (fuzzyResults.length > 0) {
                        showToast(' Did you mean? Try with exact details', 'info');
                        showNoResult();
                    } else {
                        showNoResult();
                        showToast('No results found. Please check details.', 'warning');
                    }
                }
                
                showLoading(false);
            }, 800);
        }
        
        function displayResult(student) {
            const container = document.querySelector('.result-container');
            const beltClass = getBeltClass(student.currentBelt);
            const appearingBeltClass = getBeltClass(student.appearingBelt);
            
            // Format date
            const dobDate = new Date(student.dob);
            const formattedDOB = isNaN(dobDate.getTime()) ? student.dob : 
                dobDate.toLocaleDateString('en-IN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

            const formattedMobile = formatMobileDisplay(student.parentMobile);

            const html = `
                <div class="result-card">
                    <div class="student-header">
                        <div class="print-logo no-print">
                            <img src="${CLUB_LOGO_URL}" alt="Lions Karate Club Logo" style="max-width: 80px;">
                        </div>
                        <div class="student-avatar" onclick="celebrateStudent()">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h1 class="student-name">${student.name}</h1>
                        
                        <div class="mt-4">
                            <div class="result-badge" onclick="celebrateAchievement()">
                                <i class="fas fa-trophy"></i>
                                PASS - A+
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-grid">
                        ${createInfoItems(student, formattedDOB, formattedMobile, beltClass, appearingBeltClass)}
                    </div>
                    
                    <div class="text-center mt-5" data-aos="fade-up">
                        <div class="alert border-0 py-4 px-5 fs-5" style="background: linear-gradient(135deg, rgba(233, 196, 106, 0.1), rgba(42, 157, 143, 0.1));">
                            <i class="fas fa-star me-3 text-warning animate__animated animate__pulse animate__infinite"></i>
                            <strong>Instructor's Comment:</strong> Outstanding performance with exceptional discipline and technique. Demonstrates great potential for higher belts.
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn btn-download" onclick="downloadPDF()" id="downloadBtn">
                            <i class="fas fa-file-pdf"></i> Download Gold Certificate
                        </button>
                        <button class="action-btn btn-print" onclick="printResult()">
                            <i class="fas fa-print"></i> Print Result
                        </button>
                        <button class="action-btn btn-new-search" onclick="newSearch()">
                            <i class="fas fa-search"></i> New Search
                        </button>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('noResult').style.display = 'none';
            
            // Add staggered animation to info items
            setTimeout(() => {
                const items = container.querySelectorAll('.info-item');
                items.forEach((item, index) => {
                    item.style.animationDelay = `${index * 0.1}s`;
                });
            }, 100);
            
            // Scroll to result
            setTimeout(() => {
                document.getElementById('resultSection').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'center'
                });
            }, 300);
        }
        
        function createInfoItems(student, formattedDOB, formattedMobile, beltClass, appearingBeltClass) {
            const items = [
                {
                    icon: 'birthday-cake',
                    label: 'Date of Birth',
                    value: formattedDOB
                },
                {
                    icon: student.gender === 'Male' ? 'mars' : 'venus',
                    label: 'Gender',
                    value: student.gender
                },
                {
                    icon: 'user-friends',
                    label: 'Parent/Guardian',
                    value: student.parentName
                },
                {
                    icon: 'phone',
                    label: 'Parent Contact',
                    value: formattedMobile
                },
                {
                    icon: 'calendar-alt',
                    label: 'Exam Date',
                    value: '26 January 2026'
                },
                {
                    icon: 'map-marker-alt',
                    label: 'Training Branch',
                    value: student.branch
                },
                {
                    icon: student.feesStatus && student.feesStatus.includes('Paid') ? 'check-circle text-success' : 'exclamation-circle text-warning',
                    label: 'Fees Status',
                    value: student.feesStatus || 'Not Specified'
                },
                {
                    icon: 'award',
                    label: 'Current Belt',
                    value: `<span class="belt-badge ${beltClass}">${student.currentBelt}</span>`
                },
                {
                    icon: 'star',
                    label: 'Appearing For',
                    value: `<span class="belt-badge ${appearingBeltClass}">${student.appearingBelt}</span>`
                }
            ];
            
            return items.map((item, index) => `
                <div class="info-item" data-aos="fade-up" data-aos-delay="${index * 100}">
                    <div class="info-label">
                        <i class="fas fa-${item.icon.includes('text-') ? item.icon.split(' ')[0] : item.icon}"></i> ${item.label}
                    </div>
                    <div class="info-value">${item.value}</div>
                </div>
            `).join('');
        }
        
        function formatMobileDisplay(phone) {
            phone = cleanMobile(phone);
            if (phone.length === 10) {
                return phone.replace(/(\d{3})(\d{3})(\d{4})/, '$1-$2-$3');
            }
            return phone;
        }
        
        function showNoResult() {
            document.getElementById('resultSection').style.display = 'block';
            document.querySelector('.result-container').innerHTML = '';
            document.getElementById('noResult').style.display = 'block';
            
            setTimeout(() => {
                document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }
        
        function getBeltClass(belt) {
            if (!belt) return 'belt-white';
            belt = belt.toLowerCase();
            if (belt.includes('white')) return 'belt-white';
            if (belt.includes('yellow')) return 'belt-yellow';
            if (belt.includes('orange')) return 'belt-orange';
            if (belt.includes('green')) return 'belt-green';
            if (belt.includes('blue')) return 'belt-blue';
            if (belt.includes('purple')) return 'belt-purple';
            if (belt.includes('red')) return 'belt-red';
            if (belt.includes('brown')) return 'belt-brown';
            if (belt.includes('brown')) return 'belt-brown1+2';
            if (belt.includes('brown')) return 'belt-brown3+4';
            if (belt.includes('black')) return 'belt-black';
            return 'belt-white';
        }
        
        // FIXED: Professional PDF generation with colors
        async function downloadPDF() {
            if (!currentStudent) {
                showToast('No student data available', 'warning');
                return;
            }
            
            if (isGeneratingPDF) {
                showToast('Please wait, PDF is being generated...', 'info');
                return;
            }
            
            isGeneratingPDF = true;
            const downloadBtn = document.getElementById('downloadBtn');
            const originalText = downloadBtn.innerHTML;
            
            try {
                // Show loading state
                downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
                downloadBtn.disabled = true;
                
                showToast(' Creating professional gold certificate...', 'info');
                
                // Load jsPDF
                const { jsPDF } = window.jspdf;
                
                // Create PDF document
                const doc = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4',
                    compress: true
                });
                
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const margin = 10;
                
                // ========== GOLD GRADIENT BACKGROUND ==========
                // Create gold gradient background
                const gradientColors = [
                    {pos: 0, color: [255, 248, 220]}, // Cornsilk
                    {pos: 0.3, color: [255, 215, 0]}, // Gold
                    {pos: 0.7, color: [255, 215, 0]}, // Gold
                    {pos: 1, color: [255, 248, 220]}  // Cornsilk
                ];
                
                // Draw gradient rectangles
                const gradientHeight = 5;
                for (let y = 0; y < pageHeight; y += gradientHeight) {
                    const pos = y / pageHeight;
                    let color;
                    if (pos <= 0.3) {
                        const t = pos / 0.3;
                        color = [
                            Math.round(255 + (255-255)*t),
                            Math.round(248 + (215-248)*t),
                            Math.round(220 + (0-220)*t)
                        ];
                    } else if (pos <= 0.7) {
                        color = [255, 215, 0];
                    } else {
                        const t = (pos - 0.7) / 0.3;
                        color = [
                            Math.round(255 + (255-255)*t),
                            Math.round(215 + (248-215)*t),
                            Math.round(0 + (220-0)*t)
                        ];
                    }
                    doc.setFillColor(color[0], color[1], color[2]);
                    doc.rect(0, y, pageWidth, gradientHeight, 'F');
                }
                
                // ========== GOLD BORDER ==========
                doc.setDrawColor(218, 165, 32); // Goldenrod
                doc.setLineWidth(3);
                doc.rect(margin/2, margin/2, pageWidth - margin, pageHeight - margin);
                
                // Inner decorative border
                doc.setDrawColor(184, 134, 11); // DarkGoldenrod
                doc.setLineWidth(1);
                doc.rect(margin, margin, pageWidth - (margin * 2), pageHeight - (margin * 2));
                
                // ========== CLUB LOGO ==========
                try {
                    const logoImg = await loadImage(CLUB_LOGO_URL);
                    doc.addImage(logoImg, 'PNG', pageWidth/2 - 12, margin + 5, 24, 24);
                } catch (e) {
                    console.log('Logo loading failed, using text fallback');
                    doc.setFontSize(20);
                    doc.setTextColor(184, 134, 11);
                    doc.text('', pageWidth/2, margin + 18, { align: 'center' });
                }
                
                // ========== CLUB NAME ==========
                doc.setFontSize(18);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                doc.setFont('helvetica', 'bold');
                doc.text('LIONS KARATE CLUB PUNE', pageWidth / 2, margin + 40, { align: 'center' });
                
                doc.setFontSize(10);
                doc.setFont('helvetica', 'normal');
                doc.setTextColor(160, 82, 45); // Sienna
                doc.text('EXCELLENCE IN MARTIAL ARTS - ESTABLISHED 2023', pageWidth / 2, margin + 46, { align: 'center' });
                
                // ========== CERTIFICATE TITLE ==========
                doc.setFontSize(20);
                doc.setTextColor(184, 134, 11); // DarkGoldenrod
                doc.setFont('helvetica', 'bold');
                doc.text('CERTIFICATE OF EXCELLENCE', pageWidth / 2, margin + 65, { align: 'center' });
                
                // ========== AWARDED TO TEXT ==========
                doc.setFontSize(11);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                doc.setFont('helvetica', 'normal');
                doc.text('This certificate is proudly awarded to', pageWidth / 2, margin + 75, { align: 'center' });
                
                // ========== STUDENT NAME ==========
                doc.setFontSize(22);
                doc.setTextColor(0, 0, 0); // Black
                doc.setFont('helvetica', 'bold');
                const studentName = currentStudent.name.toUpperCase();
                doc.text(studentName, pageWidth / 2, margin + 90, { align: 'center' });
                
                // ========== ACHIEVEMENT TEXT ==========
                doc.setFontSize(11);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                doc.setFont('helvetica', 'normal');
                doc.text('for outstanding performance in the', pageWidth / 2, margin + 100, { align: 'center' });
                
                // ========== BELT EXAMINATION ==========
                doc.setFontSize(16);
                doc.setTextColor(184, 134, 11); // DarkGoldenrod
                doc.setFont('helvetica', 'bold');
                const beltText = currentStudent.appearingBelt.toUpperCase() + ' BELT EXAMINATION';
                doc.text(beltText, pageWidth / 2, margin + 110, { align: 'center' });
                
                // ========== GOLD RESULT BOX ==========
                const resultBoxWidth = 70;
                const resultBoxX = (pageWidth - resultBoxWidth) / 2;
                const resultBoxY = margin + 120;
                
                // Gold gradient box background
                doc.setFillColor(255, 215, 0, 0.5); // Gold with transparency
                doc.roundedRect(resultBoxX, resultBoxY, resultBoxWidth, 12, 3, 3, 'F');
                
                // Box border
                doc.setDrawColor(218, 165, 32); // Goldenrod
                doc.setLineWidth(0.5);
                doc.roundedRect(resultBoxX, resultBoxY, resultBoxWidth, 12, 3, 3);
                
                // Result Text
                doc.setFontSize(13);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                doc.setFont('helvetica', 'bold');
                doc.text('RESULT: PASS', pageWidth / 2 - 15, resultBoxY + 8, { align: 'center' });
                doc.text('GRADE: A+', pageWidth / 2 + 15, resultBoxY + 8, { align: 'center' });
                
                // ========== STUDENT DETAILS ==========
                let currentY = resultBoxY + 25;
                const col1X = margin + 10;
                const col2X = pageWidth / 2 + 10;
                
                doc.setFontSize(9);
                doc.setTextColor(101, 67, 33); // Dark Brown
                doc.setFont('helvetica', 'normal');
                
                // Format date for display
                const formattedDOB = formatDateForPDF(currentStudent.dob);
                const formattedMobile = formatMobileDisplay(currentStudent.parentMobile);
                
                // Column 1 - Left side details
                doc.text(`Date of Birth: ${formattedDOB}`, col1X, currentY);
                doc.text(`Parent: ${currentStudent.parentName}`, col1X, currentY + 6);
                doc.text(`Mobile: ${formattedMobile}`, col1X, currentY + 12);
                doc.text(`Branch: ${currentStudent.branch}`, col1X, currentY + 18);
                
                // Column 2 - Right side details
                doc.text(`Current Belt: ${currentStudent.currentBelt}`, col2X, currentY);
                doc.text(`Appearing Belt: ${currentStudent.appearingBelt}`, col2X, currentY + 6);
                doc.text(`Fees Status: ${currentStudent.feesStatus || 'Paid'}`, col2X, currentY + 12);
                doc.text(`Gender: ${currentStudent.gender}`, col2X, currentY + 18);
                doc.text(`Exam Date: January 26, 2026`, col2X, currentY + 24);
                
                // ========== CLUB OFFICIAL SIGNATURE ==========
                currentY += 35;
                doc.setFontSize(10);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                
                // Center signature for Lions Karate Club
                doc.text('________________________', pageWidth / 2, currentY, { align: 'center' });
                doc.text('LIONS KARATE CLUB PUNE', pageWidth / 2, currentY + 6, { align: 'center' });
                doc.setFontSize(8);
                doc.text('OFFICIAL CERTIFICATE', pageWidth / 2, currentY + 11, { align: 'center' });
                
                // ========== GOLDEN SEAL ==========
                doc.setFillColor(255, 215, 0, 0.6); // Gold with transparency
                doc.circle(pageWidth / 2, currentY - 5, 8, 'F');
                doc.setDrawColor(184, 134, 11); // DarkGoldenrod
                doc.setLineWidth(0.5);
                doc.circle(pageWidth / 2, currentY - 5, 8);
                
                doc.setFontSize(10);
                doc.setTextColor(139, 69, 19); // SaddleBrown
                doc.text('', pageWidth / 2, currentY - 2, { align: 'center' });
                
                // ========== CERTIFICATE ID ==========
                doc.setFontSize(7);
                doc.setTextColor(128, 128, 128); // Gray
                const certId = 'LKC-' + Date.now().toString().slice(-8);
                doc.text(`Certificate ID: ${certId}`, pageWidth / 2, pageHeight - margin, { align: 'center' });
                doc.text(`Generated: ${new Date().toLocaleDateString('en-IN')}`, pageWidth / 2, pageHeight - margin + 4, { align: 'center' });
                
                // ========== SAVE PDF ==========
                const fileName = `Lions_Karate_Certificate_${currentStudent.name.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`;
                doc.save(fileName);
                
                showToast(' Professional gold certificate downloaded successfully!', 'success');
                createConfetti();
                
            } catch (error) {
                console.error('PDF Generation Error:', error);
                showToast(' Error generating PDF. Please try again.', 'error');
                
                // Fallback: Try simple PDF generation
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    doc.setFontSize(20);
                    doc.setTextColor(139, 69, 19);
                    doc.text('Lions Karate Club Certificate', 20, 20);
                    doc.setFontSize(16);
                    doc.text(`Student: ${currentStudent.name}`, 20, 40);
                    doc.setTextColor(184, 134, 11);
                    doc.text(`Belt: ${currentStudent.appearingBelt}`, 20, 50);
                    doc.setTextColor(0, 100, 0);
                    doc.text('Result: PASS - A+', 20, 60);
                    doc.setTextColor(139, 69, 19);
                    doc.text(`Exam Date: January 26, 2026`, 20, 70);
                    doc.save(`Certificate_${currentStudent.name}.pdf`);
                    showToast(' Simple certificate downloaded!', 'success');
                } catch (fallbackError) {
                    showToast(' Both PDF methods failed. Please try printing.', 'error');
                }
            } finally {
                // Reset button state
                isGeneratingPDF = false;
                if (downloadBtn) {
                    downloadBtn.innerHTML = originalText;
                    downloadBtn.disabled = false;
                }
            }
        }
        
        // Helper function to load image with promise
        function loadImage(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = url + '?v=' + Date.now();
            });
        }
        
        function formatDateForPDF(dateString) {
            try {
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return dateString;
                return date.toLocaleDateString('en-IN', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric'
                });
            } catch {
                return dateString;
            }
        }
        
        // FIXED: Print function that works on mobile and prints in single page
        function printResult() {
            if (!currentStudent) {
                showToast('No student data available', 'warning');
                return;
            }
            
            showToast(' Preparing for printing...', 'info');
            
            // Create a simple, mobile-friendly print dialog
            const printWindow = window.open('', '_blank');
            if (!printWindow) {
                showToast(' Please allow popups to print', 'error');
                return;
            }
            
            // Get current date for print
            const currentDate = new Date().toLocaleDateString('en-IN', {
                day: '2-digit',
                month: 'long',
                year: 'numeric'
            });
            
            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Lions Karate Certificate - ${currentStudent.name}</title>
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>
                        @media print {
                            @page {
                                margin: 5mm !important;
                                size: A4 portrait !important;
                            }
                            body {
                                margin: 0 !important;
                                padding: 0 !important;
                                font-size: 11pt !important;
                                font-family: 'Times New Roman', serif !important;
                                color: black !important;
                                background: white !important;
                                -webkit-print-color-adjust: exact !important;
                                print-color-adjust: exact !important;
                            }
                            .certificate-container {
                                page-break-inside: avoid !important;
                                page-break-before: avoid !important;
                                page-break-after: avoid !important;
                            }
                        }
                        
                        body {
                            font-family: 'Times New Roman', serif;
                            margin: 0;
                            padding: 10mm;
                            background: #fff;
                            color: #000;
                        }
                        
                        .certificate-container {
                            width: 100%;
                            max-width: 190mm;
                            margin: 0 auto;
                            padding: 8mm;
                            border: 3mm solid #DAA520;
                            background: linear-gradient(to bottom, #FFF8DC, #FFD700, #FFF8DC);
                            box-sizing: border-box;
                            position: relative;
                        }
                        
                        .gold-border {
                            border: 2px solid #8B4513;
                            padding: 6mm;
                            height: 100%;
                        }
                        
                        .print-logo {
                            text-align: center;
                            margin-bottom: 4mm;
                        }
                        
                        .print-logo img {
                            max-width: 35mm;
                            height: auto;
                            filter: grayscale(100%);
                        }
                        
                        .club-name {
                            font-size: 16pt;
                            font-weight: bold;
                            color: #8B4513;
                            margin-bottom: 2mm;
                            text-align: center;
                            text-transform: uppercase;
                        }
                        
                        .club-subtitle {
                            font-size: 9pt;
                            color: #A0522D;
                            text-align: center;
                            margin-bottom: 6mm;
                        }
                        
                        .certificate-title {
                            font-size: 18pt;
                            color: #B8860B;
                            text-align: center;
                            margin: 6mm 0;
                            font-weight: bold;
                            text-transform: uppercase;
                        }
                        
                        .awarded-text {
                            font-size: 10pt;
                            color: #8B4513;
                            text-align: center;
                            margin-bottom: 4mm;
                        }
                        
                        .student-name {
                            font-size: 20pt;
                            color: #000;
                            font-weight: bold;
                            text-align: center;
                            margin: 6mm 0;
                            text-transform: uppercase;
                            border-bottom: 2px solid #8B4513;
                            padding-bottom: 3mm;
                        }
                        
                        .achievement-text {
                            font-size: 10pt;
                            color: #8B4513;
                            text-align: center;
                            margin-bottom: 4mm;
                        }
                        
                        .belt-exam {
                            font-size: 14pt;
                            color: #B8860B;
                            font-weight: bold;
                            text-align: center;
                            margin-bottom: 6mm;
                            text-transform: uppercase;
                        }
                        
                        .gold-result-box {
                            background: rgba(255, 215, 0, 0.3);
                            border: 2px solid #DAA520;
                            border-radius: 3mm;
                            padding: 3mm;
                            margin: 4mm auto;
                            width: 80%;
                            text-align: center;
                        }
                        
                        .result-text {
                            font-size: 13pt;
                            color: #8B4513;
                            font-weight: bold;
                            margin: 1mm 0;
                        }
                        
                        .student-details {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 2mm;
                            margin: 6mm 0;
                            font-size: 9pt;
                        }
                        
                        .detail-item {
                            margin: 1mm 0;
                            padding: 1mm;
                            border-bottom: 1px dashed #ccc;
                        }
                        
                        .detail-label {
                            font-weight: bold;
                            color: #8B4513;
                        }
                        
                        .detail-value {
                            color: #000;
                        }
                        
                        .signature {
                            text-align: center;
                            margin-top: 8mm;
                            padding-top: 3mm;
                            border-top: 1px solid #8B4513;
                        }
                        
                        .signature-box {
                            display: inline-block;
                            text-align: center;
                        }
                        
                        .signature-line {
                            border-top: 1px solid #000;
                            width: 50mm;
                            margin: 6mm auto 2mm;
                        }
                        
                        .gold-seal {
                            position: absolute;
                            bottom: 12mm;
                            left: 50%;
                            transform: translateX(-50%);
                            width: 15mm;
                            height: 15mm;
                            background: rgba(255, 215, 0, 0.5);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 10pt;
                            color: #8B4513;
                            border: 1px solid #8B4513;
                        }
                        
                        .certificate-footer {
                            font-size: 7pt;
                            color: #666;
                            text-align: center;
                            margin-top: 10mm;
                            border-top: 1px dashed #ccc;
                            padding-top: 2mm;
                        }
                        
                        .no-print {
                            display: none;
                        }
                        
                        @media screen and (max-width: 768px) {
                            body {
                                padding: 5mm;
                            }
                            .certificate-container {
                                padding: 5mm;
                                border-width: 2mm;
                            }
                            .student-details {
                                grid-template-columns: 1fr;
                            }
                        }
                        
                        .print-instructions {
                            text-align: center;
                            padding: 10mm;
                            font-family: Arial, sans-serif;
                            background: #f0f0f0;
                            margin: 10mm auto;
                            border-radius: 5mm;
                            max-width: 600px;
                        }
                        
                        .print-button {
                            display: block;
                            margin: 10mm auto;
                            padding: 10mm 20mm;
                            background: #4CAF50;
                            color: white;
                            border: none;
                            border-radius: 5mm;
                            font-size: 16pt;
                            cursor: pointer;
                        }
                        
                        .print-button:hover {
                            background: #45a049;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-instructions no-print">
                        <h2>Print Your Certificate</h2>
                        <p>Your certificate is ready to print. Please make sure:</p>
                        <ol style="text-align: left; max-width: 400px; margin: 0 auto;">
                            <li>Paper size is set to A4</li>
                            <li>Orientation is set to Portrait</li>
                            <li>Margins are set to "Minimum" or "None"</li>
                            <li>Scale is set to 100%</li>
                            <li>Enable "Background graphics" in print settings</li>
                        </ol>
                        <button class="print-button" onclick="window.print()">
                             Print Certificate
                        </button>
                        <p style="color: #666; margin-top: 10mm;">
                            After printing, you can close this window.
                        </p>
                    </div>
                    
                    <div class="certificate-container">
                        <div class="gold-border">
                            <div class="print-logo">
                                <img src="${CLUB_LOGO_URL}" alt="Lions Karate Club Logo">
                            </div>
                            <div class="club-name">LIONS KARATE CLUB PUNE</div>
                            <div class="club-subtitle">Excellence in Martial Arts Since 2023</div>
                            
                            <div class="certificate-title">CERTIFICATE OF EXCELLENCE</div>
                            
                            <div class="awarded-text">This certificate is proudly awarded to</div>
                            
                            <div class="student-name">${currentStudent.name}</div>
                            
                            <div class="achievement-text">for outstanding performance in the</div>
                            
                            <div class="belt-exam">${currentStudent.appearingBelt.toUpperCase()} BELT EXAMINATION</div>
                            
                            <div class="gold-result-box">
                                <div class="result-text">RESULT: PASS</div>
                                <div class="result-text">GRADE: A+</div>
                            </div>
                            
                            <div class="student-details">
                                <div>
                                    <div class="detail-item">
                                        <span class="detail-label">Date of Birth:</span><br>
                                        <span class="detail-value">${formatDateForPDF(currentStudent.dob)}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Parent Name:</span><br>
                                        <span class="detail-value">${currentStudent.parentName}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Mobile:</span><br>
                                        <span class="detail-value">${formatMobileDisplay(currentStudent.parentMobile)}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Branch:</span><br>
                                        <span class="detail-value">${currentStudent.branch}</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="detail-item">
                                        <span class="detail-label">Current Belt:</span><br>
                                        <span class="detail-value">${currentStudent.currentBelt}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Appearing Belt:</span><br>
                                        <span class="detail-value">${currentStudent.appearingBelt}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Gender:</span><br>
                                        <span class="detail-value">${currentStudent.gender}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Fees Status:</span><br>
                                        <span class="detail-value">${currentStudent.feesStatus || 'Paid'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Exam Date:</span><br>
                                        <span class="detail-value">January 26, 2026</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="signature">
                                <div class="signature-box">
                                    <div class="signature-line"></div>
                                    <strong>LIONS KARATE CLUB PUNE</strong><br>
                                    <span style="font-size: 9pt; color: #666;">Official Certificate</span>
                                </div>
                            </div>
                            
                            <div class="gold-seal">
                                
                            </div>
                            
                            <div class="certificate-footer">
                                Certificate ID: LKC-${Date.now().toString().slice(-8)} | Generated: ${currentDate} | Page 1 of 1
                            </div>
                        </div>
                    </div>
                    
                    <script>
                        // Auto-print after 1 second on desktop, but show instructions on mobile
                        if (window.innerWidth > 768) {
                            setTimeout(function() {
                                window.print();
                            }, 1000);
                        }
                        
                        // Close window after printing
                        window.onafterprint = function() {
                            setTimeout(function() {
                                window.close();
                            }, 1000);
                        };
                        
                        // Also trigger print when button is clicked
                        document.querySelector('.print-button').addEventListener('click', function() {
                            window.print();
                        });
                    <\/script>
                </body>
                </html>
            `;
            
            printWindow.document.write(printContent);
            printWindow.document.close();
            
            // Focus the window
            printWindow.focus();
        }
        
        function newSearch() {
            document.getElementById('searchForm').reset();
            document.getElementById('resultSection').style.display = 'none';
            scrollToSearch();
        }
        
        function resetSearch() {
            document.getElementById('searchForm').reset();
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('noResult').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function scrollToSearch() {
            document.querySelector('.search-card').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }
        
        function showLoading(show) {
            const searchBtn = document.getElementById('searchButton');
            if (show) {
                searchBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Searching Database...';
                searchBtn.disabled = true;
            } else {
                searchBtn.innerHTML = '<i class="fas fa-search"></i> Search Results';
                searchBtn.disabled = false;
            }
        }
        
        function showToast(message, type = 'info') {
            const container = document.querySelector('.toast-container');
            
            const toast = document.createElement('div');
            toast.className = 'custom-toast';
            
            let icon = 'info-circle';
            let color = '#17a2b8';
            
            switch(type) {
                case 'success':
                    icon = 'check-circle';
                    color = '#28a745';
                    break;
                case 'error':
                    icon = 'exclamation-circle';
                    color = '#dc3545';
                    break;
                case 'warning':
                    icon = 'exclamation-triangle';
                    color = '#ffc107';
                    break;
            }
            
            toast.innerHTML = `
                <div class="toast-icon" style="color: ${color}">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div>
                    <strong style="color: ${color}">${type.toUpperCase()}</strong>
                    <p class="mb-0 mt-1">${message}</p>
                </div>
            `;
            
            container.appendChild(toast);
            
            // Show toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Remove toast after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 500);
            }, 5000);
        }
        
        function createCelebration() {
            createConfetti();
            playSuccessSound();
        }
        
        function createConfetti() {
            const colors = ['#FFD700', '#DAA520', '#B8860B', '#8B4513', '#e63946', '#2a9d8f'];
            const confettiCount = 150;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 20 + 10 + 'px';
                confetti.style.height = Math.random() * 20 + 10 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                document.body.appendChild(confetti);
                
                // Animate confetti
                const animation = confetti.animate([
                    { 
                        top: '0px', 
                        opacity: 1,
                        transform: `rotate(0deg) translateX(0)`
                    },
                    { 
                        top: Math.random() * 100 + 100 + 'vh', 
                        opacity: 0,
                        transform: `rotate(${Math.random() * 720}deg) translateX(${Math.random() * 100 - 50}px)`
                    }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }
        
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Audio not supported');
            }
        }
        
        function celebrateStudent() {
            const avatar = document.querySelector('.student-avatar');
            if (avatar) {
                avatar.style.animation = 'avatarFloat 0.5s ease-in-out 3';
            }
            showToast(' Student Celebrated!', 'success');
        }
        
        function celebrateAchievement() {
            createConfetti();
            showToast(' Achievement Celebrated!', 'success');
        }
    </script>
</body>
</html>
